<map>
    
    <image driver="tms"
           url="http://readymap.org/readymap/tiles/1.0.0/22/">
    </image>
    
    <elevation driver="tms"
           url="http://readymap.org/readymap/tiles/1.0.0/116/">
    </elevation>
    
    <extensions>
    
        <!--
         | Loads the osgEarthBuildings extension.
         -->
        <buildings>
        
            <!--
             | Feature source. Make sure to use/make a spatial index.
             -->
        
            <features driver="ogr"
                      build_spatial_index="true"
                      url="../data/boston_buildings.zip/boston_buildings_utm19.shp">
            </features>
            
            <!--
             | Building Catalog contains all the building templates;
             | these describe the variations on parametric buildings
             | that are available and the height/area limitations on
             | each one.
             -->
            
            <building_catalog>../data/buildings.xml</building_catalog>
            
            <!--
             | Stylesheet describes now the buildings will look.
             -->
            <styles>
            
                <!--
                 | This is a standard osgEarth Resource Library,
                 | and contains all the textures for elevations and roofs,
                 | as well as models for instancing.
                 -->
                <library name="buildings">
                    <url>../data/catalog/catalog.xml</url>
                </library>
                
                <!--
                 | Define one style for each LOD of buildings.
                 | Note: the LOD number is the style name!
                 | In this style, we tell the generator to get heights
                 | by calling the getHeight() JavaScript function, and
                 | to clamp buildings to the terrain. We also tell it to
                 | use the "buildings" resource library loaded above.
                 -->
                <style type="text/css">
                    14 {
                        building-height:   getHeight();
                        building-library:  buildings;
                        altitude-clamping: terrain;
                    }
                </style>
                
                <!--
                 | Custom JS goes here. In this example we are using a JS function
                 | to retrieve the building height from a feature property, and
                 | convert it from "stories" to meters.
                 -->
                <script language="javascript">
                  <![CDATA[
                    function getHeight() {
                        var h = Math.max(5.0, feature.properties.story_ht_*3.5);
                        return h;
                    }
                  ]]>
                </script>
            </styles>
            
            <!--
             | Buildings don't support caching at this time
             -->
            <cache_policy max_age="0"/>
            
        </buildings>
        
        <viewpoints>
            <viewpoint name="Boston Overview" heading="24.261" height="0" lat="42.34425" long="-71.076262" pitch="-21.6" range="3450"/>
            <viewpoint name="Boston Downtown" heading="117" lat="42.3568" long="-71.0585" height="0" pitch="-20.4" range="1500" />
            <viewpoint name="Boston Street Level" heading="-145.64081" lat="42.364015" long="-71.054149" pitch="-9.701" range="144.95"/>
            <viewpoint name="Boston Residential">
              <heading>-27.9695</heading>
              <pitch>-11.1558</pitch>
              <range>137.351m</range>
              <long>-71.04069589645964</long>
              <lat>42.33174157604761</lat>
              <height>-0.0002502305433154106</height>
            </viewpoint>
            <viewpoint name="Office Building">
              <heading>30.6343</heading>
              <pitch>-22.1976</pitch>
              <range>391.411m</range>
              <long>-71.05626216661491</long>
              <lat>42.35595951880791</lat>
              <height>25.37104411330074</height>
            </viewpoint>
        </viewpoints>
        
    </extensions>
</map>